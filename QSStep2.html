<!doctype html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang=""> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8" lang=""> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9" lang=""> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang=""> <!--<![endif]-->
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Logic - Free Multipurpose Business Template</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="apple-touch-icon" href="apple-touch-icon.png">


    <link rel="stylesheet" href="assets/css/iconfont.css">
    <link rel="stylesheet" href="assets/fonts/stylesheet.css">
    <link rel="stylesheet" href="assets/css/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/jquery.fancybox.css">
    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/magnific-popup.css">
    <!--        <link rel="stylesheet" href="assets/css/bootstrap-theme.min.css">-->


    <!--For Plugins external css-->
    <link rel="stylesheet" href="assets/css/plugins.css" />

    <!--Theme custom css -->
    <link rel="stylesheet" href="assets/css/style.css">

    <!--Theme Responsive css-->
    <link rel="stylesheet" href="assets/css/responsive.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="assets/js/vendor/modernizr-2.8.3-respond-1.4.2.min.js"></script>

    <script type="text/javascript">
		

        $(document).ready(function(){

            $('#back').on('click', function(e){
                e.preventDefault();
                window.history.back();
            });

			age = getParameterByName('age');
			$('#age').attr('value',age)
		
            affordable_mortgage_years = getParameterByName('affordable_mortgage_years');
			$('#affordable_mortgage_years').attr('value',affordable_mortgage_years)

			
			
        });
		
		/**
		Get query string for setting language
		**/
		function getParameterByName(name, url) {
			if (!url) url = window.location.href;
			name = name.replace(/[\[\]]/g, '\\$&');
			var regex = new RegExp('[?&]' + name + '(=([^&#]*)|&|#|$)'),
				results = regex.exec(url);
			if (!results) return null;
			if (!results[2]) return '';
			return decodeURIComponent(results[2].replace(/\+/g, ' '));
		}
    </script>


    <script type="text/javascript">
        $(document).ready(function(){
        });
        function validaterepay(input){
            var income = parseInt($('#income').val());
            var monthlyrepayment = $(input).val();
            var num_monthlyrepayment = parseInt(monthlyrepayment);

            var checkmthpay = num_monthlyrepayment / income;

            if(checkmthpay>=0.5){
                $('#errorMsg').html("The Monthly Repayment cannot over 50% of Monthly Income!");
                $('#errorMsg').show();
                $('#nextstage').removeAttr('href');
                $('#nextstage').removeAttr('class');
                $('#nextstage').addClass('btnlock')
                $('#loanamt').html('');

            }

            else{
                $('#errorMsg').hide();


                $('#nextstage').removeAttr('class');
                $('#nextstage').addClass('btnnextstep')

            }

        }
		
		
		function validate(){
			var debt = parseInt($('#debt').val());
			var monthlyrepayment = parseInt($('#monthlyrepayment').val());
			if(debt>monthlyrepayment){
				$('#errorMsg').html("Your monthly debt is larger than your monthly repayment. You may not afford that amount of monthly repayment.");
				$('#errorMsg').show();
				$('#nextstage').removeAttr('href');
                $('#nextstage').removeAttr('class');
                $('#nextstage').addClass('btnlock')
			}else{
				$('#errorMsg').hide();
				$('#nextstage').removeAttr('class');
                $('#nextstage').addClass('btnnextstep')
			}
		}






        function cal(){
            var age = parseInt($('#age').val());
            var affordable_mortgage_years = parseInt($('#affordable_mortgage_years').val());
            var interest = (parseFloat($('#interest').val())) / 100;
            var stress_interest = interest + 0.03;
            var income =parseInt($('#income').val());
            var monthlyrepayment = parseInt($('#monthlyrepayment').val());
            var debt = parseInt($('#debt').val());

            var loan = ((monthlyrepayment - debt)*(Math.pow((1+(interest/12)),(affordable_mortgage_years*12))-1)) / ((interest/12) * ((Math.pow((1+(interest/12)),(affordable_mortgage_years*12)))));
            var loanamt = Math.round(loan);
			
			if(loanamt <= 0){
				$('#loanamt').html('');
				$('#nextstage').removeAttr('href');
                $('#nextstage').removeAttr('class');
                $('#nextstage').addClass('btnlock')
			}
			else{
			
            $('#loanamt').html("<label>"+loanamt+"</label>");
            $('#nextstage').attr('href', "QSStep3.html?affordable_mortgage_years="+affordable_mortgage_years+"&age="+age+"&interest="+interest+"&income="+income+"&monthlyrepayment="+monthlyrepayment+"&debt="+debt+"&loanamt="+loanamt);

			}

        }




        function checknull() {
            $('#nextstage').removeAttr('href');
            $('#nextstage').removeAttr('class');
            $('#nextstage').addClass('btnlock')
        }
    </script>

    <script src="assets/js/vendor/modernizr-2.8.3-respond-1.4.2.min.js"></script>

</head>
<body data-spy="scroll" data-target=".navbar-collapse"  onload="checknull()">
<!--[if lt IE 8]>
<p class="browserupgrade">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
<![endif]-->
<div class='preloader'><div class='loaded'>&nbsp;</div></div>
<div class="culmn">
    <header id="main_menu" class="header navbar-fixed-top menu-scroll">
        <div class="main_menu_bg">
            <div class="container">
                <div class="row">
                    <div class="nave_menu">
                        <nav class="navbar navbar-default">
                            <div class="container-fluid">
                                <!-- Brand and toggle get grouped for better mobile display -->
                                <div class="navbar-header">
                                    <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                                        <span class="sr-only">Toggle navigation</span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                    </button>
                                    <a class="navbar-brand" href="#home">
                                        <img src="assets/images/logo.png"/>
                                    </a>
                                </div>

                                <!-- Collect the nav links, forms, and other content for toggling -->



                                <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">

                                    <ul class="nav navbar-nav navbar-right">
                                        <li><a href="index.html#home">HOME</a></li>
                                        <li><a href="index.html#about">About</a></li>
                                        <li><a href="index.html#service">Functions</a></li>
                                        <li><a href="index.html#information">Information</a></li>
                                        <li><a href="index.html#contact">CONTACT</a></li>


                                        <li>
                                            <a href="#"  data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
                                                <span class="glyphicon glyphicon-search"></span></a>
                                            <ul class="dropdown-menu">
                                                <li>
                                                    <form class="navbar-form" role="search">
                                                        <div class="form-group">
                                                            <input type="text" class="form-control" placeholder="Search">
                                                        </div>
                                                    </form>
                                                </li>
                                            </ul>
                                        </li>
                                    </ul>


                                </div>

                            </div>
                        </nav>
                    </div>
                </div>

            </div>

        </div>
    </header> <!--End of header -->



    <section id="repayment" class="container">




        <div class="calHead">Step 2 - Mortgage Loan Amount Evaluation
            <div class="separator"></div>
        </div>

        <div class="progress">
            <div class="progress-bar" role="progressbar" style="width: 30%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">30%</div>
        </div>
        The system will base on your age to evaluate the affordable mortgage loan amount for you.
        <br><br>
        <table class="table">
            <tr>
                <th rowspan="1">Age:</th>
                <td colspan="2">
                    <input type="text" class="form-control" id="age"  disabled>
                </td>
            </tr>
            <tr>
                <th rowspan="1">Affordable Mortgage Years:</th>
                <td colspan="2">
                    <input type="text" class="form-control" id="affordable_mortgage_years" disabled  >
                </td>
            </tr>
			 <tr>
                <th rowspan="1">Mortgage Interest Rate:</th>
                <td colspan="2">
                    <input type="text" class="form-control" id="interest" value="2.15" oninput="cal()" placeholder="(You can modify)" >
                </td>
            </tr>
        </table>



        <div>

            <button  type="button" id="previewgraph"  class="btnrent" style="margin-left: 870px; ">Preview Interest Rate for each bank</button>
            <br>

            <!-- The Modal -->
            <div id="myModal" class="modal">

                <!-- Modal content -->
                <div class="modal-content">
                    <span class="close">&times;</span>
                    <p  style="font-size:20px"><strong>The default 2.15% is the fixed mortgage interest rate for first 1-3 year normally. User can adjust the interest rate for evaluation.</strong></p>
                    <br><br>
                    <img src="assets/images/interestrate1.PNG" width="100%" > <br>
                    <img src="assets/images/interestrate2.PNG" width="100%" > <br>
                    <img src="assets/images/interestrate3.PNG" width="100%" >

                    <p  style="font-size:20px">The interest rate is just for reference only. Client should rely on the final verification from the bank.</p>
                    <p >Reference: http://www.property.hk/eng/mortgage_rate.php</p>

                    <label style="padding-right:500px;"> </label>
                </div>

            </div>



            <script>
                // Get the modal
                var modal = document.getElementById('myModal');

                // Get the button that opens the modal
                var btn = document.getElementById("previewgraph");

                // Get the <span> element that closes the modal
                var span = document.getElementsByClassName("close")[0];

                // When the user clicks on the button, open the modal
                btn.onclick = function() {
                    modal.style.display = "block";
                }

                // When the user clicks on <span> (x), close the modal
                span.onclick = function() {
                    modal.style.display = "none";
                }

                // When the user clicks anywhere outside of the modal, close it
                window.onclick = function(event) {
                    if (event.target == modal) {
                        modal.style.display = "none";
                    }
                }
            </script>







        <br>

        Please Enter Your Monthly Income & Expected Monthly Repayment:
        <table class="table">
            <tr>
                <th rowspan="1">Monthly Income (Family):</th>
                <td colspan="2">
                    <input type="text" class="form-control"  id="income" placeholder="(HKD)" >
                </td>
            </tr>

            <tr>
                <th rowspan="1">Expected Monthly Repayment:</th>
                <td colspan="2">
                    <input type="text" class="form-control" oninput=" cal(); validaterepay(this)"   id="monthlyrepayment" placeholder="(HKD)" >
                </td>
            </tr>

            <tr>
                <th rowspan="1">Monthly Debt:</th>
                <td colspan="2">
                    <input type="text" class="form-control"   oninput="cal(); validate();"  id="debt" value="0" placeholder="(HKD)" >
                </td>
            </tr>
        </table>

        <h2 id="result">Suggestion</h2>
        <table class="table">
            <tr>
                <th>Affordable Mortgage Loan Amount:</th>
                <td id="loanamt"></td>
            </tr>
            <tr>
                <th>
                    <label id="errorMsg" style="color:red;display:none;"></label>
                </th>
            </tr>
        </table>






        <br>
        <div>
            <a href="QSStep1.html" type="button" id="back" onclick="" class="btnback" style="margin-right: 830px;">←  Back</a>
            <a href="QSStep3.html" type="button" id="nextstage" onclick="" class="btnnextstep">Next Stage  →</a>
        </div>

        <br> <br>



    </section>




    <section id="footer" class="footer_widget">
        <div class="video_overlay">
            <div class="container">
                <div class="row">
                    <div class="col-sm-12">
                        <div class="row">
                            <div class="main_widget">
                                <div class="col-sm-3 col-xs-12">
                                    <div class="single_widget wow fadeIn" data-wow-duration="800ms">
                                        <div class="footer_logo">
                                            <img src="assets/images/logo.png" alt="" />
                                        </div>
                                        <p></p>

                                    </div>
                                </div>

                                <div class="col-sm-3  col-xs-12">
                                    <div class="single_widget wow fadeIn" data-wow-duration="800ms">

                                        <div class="footer_title">
                                            <h4>SITEMAP</h4>
                                            <div class="separator"></div>
                                        </div>
                                        <ul>
                                            <li><a href="">Services</a></li>
                                            <li><a href="">About Us</a></li>
                                            <li><a href="">Our Team</a></li>
                                            <li><a href="">Portfolio</a></li>
                                        </ul>
                                    </div>
                                </div>

                                <div class="col-sm-3  col-xs-12">
                                    <div class="single_widget wow fadeIn" data-wow-duration="800ms">
                                        <div class="footer_title">
                                            <h4>Function</h4>
                                            <div class="separator"></div>
                                        </div>
                                        <ul>
                                            <li><a href="mortgageCal.html">Housing Mortgage Calculator</a></li>
                                            <li><a href="repaymentCal.html">Mortgage Amendment Repayment </a></li>
                                            <li><a href="stressCal.html">Mortgage Stress-Test</a></li>
                                            <li><a href="QSInfo.html">Housing Adviser Guide</a></li>
                                        </ul>
                                    </div>
                                </div>

                                <div class="col-sm-3 col-xs-12">
                                    <div class="single_widget wow fadeIn" data-wow-duration="800ms">

                                        <div class="footer_title">
                                            <h4>NEWSLETTER</h4>
                                            <div class="separator"></div>
                                        </div>

                                        <div class="footer_subcribs_area">
                                            <p>Sign up for our mailing list to get latest updates and offers.</p>
                                            <form class="navbar-form navbar-left" role="search">
                                                <div class="form-group">
                                                    <input type="text" class="form-control" placeholder="Search">
                                                    <button type="submit" class="submit_btn"></button>
                                                </div>

                                            </form>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>

    </section>


    <section class="footer">
        <div class="container">
            <div class="row">
                <div class="col-sm-12">
                    <div class="main_footer">
                        <div class="row">

                            <div class="col-sm-6 col-xs-12">
                                <div class="copyright_text">
                                </div>
                            </div>

                            <div class="col-sm-6 col-xs-12">
                                <div class="flowus">
                                    <a href=""><i class="fa fa-facebook"></i></a>
                                    <a href=""><i class="fa fa-twitter"></i></a>
                                    <a href=""><i class="fa fa-google-plus"></i></a>
                                    <a href=""><i class="fa fa-instagram"></i></a>
                                    <a href=""><i class="fa fa-youtube"></i></a>
                                    <a href=""><i class="fa fa-dribbble"></i></a>
                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>









</div>

<!-- START SCROLL TO TOP  -->

<div class="scrollup">
    <a href="#"><i class="fa fa-chevron-up"></i></a>
</div>

<script src="assets/js/vendor/jquery-1.11.2.min.js"></script>
<script src="assets/js/vendor/bootstrap.min.js"></script>

<script src="assets/js/jquery.magnific-popup.js"></script>
<script src="assets/js/jquery.mixitup.min.js"></script>
<script src="assets/js/jquery.easing.1.3.js"></script>
<script src="assets/js/jquery.masonry.min.js"></script>
<script src="assets/js/jquery.fancybox.pack.js"></script>

<script src="https://maps.googleapis.com/maps/api/js?v=3.exp"></script>
<script src="http://maps.google.com/maps/api/js"></script>
<script src="assets/js/gmaps.min.js"></script>


<script>

    function showmap() {
        var mapOptions = {
            zoom: 8,
            scrollwheel: false,
            center: new google.maps.LatLng(-34.397, 150.644),
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById('map_canvas'), mapOptions);
    }
</script>

<script src="assets/js/plugins.js"></script>
<script src="assets/js/main.js"></script>

</body>
</html>
